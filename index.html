<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <style>
      canvas { border: 1px solid orange; }
    </style>
  </head>

  <body>
    <canvas id="canvas" width="300" height="300"></canvas>
    <script>
      var x = 10;
      var y = 10;
      var w = 20;
      var h = 30;
      var speed = 2;

      var canvas = document.getElementById("canvas");
      var ctx = canvas.getContext("2d");

      var update = function() {
        var crossedRightLimit = x >= 270;
        var crossedLeftLimit = x <= 10;
        // var crossedUpLimit = y <= 10;
        // var crossedDownLimit = y >= 260;

        if (crossedRightLimit) {
          x = 270;
          speed = -speed;
        } else if (crossedLeftLimit) {
          x = 10;
          speed = -speed;}
        // } else if (crossedUpLimit) {
        //   y = 10;
        //   speed = -speed;
        // } else if (crossedDownLimit) {
        //   y = 260;
        //   speed = -speed;
        // }

        x = x + speed;
        y = y + speed;

      };

      var draw = function() {
        ctx.clearRect(0, 0, 500, 300);
        ctx.fillRect(x, y, w, h);
      };

      var step = function() {
        update();
        draw();
        window.requestAnimationFrame(step);
      };

      step();
    </script>
  </body>
</html>
